<form id="carForm">
    <label for="brand">Velg bilmerke:</label>
    <select id="brand" name="brand">
        <option value="">Velg...</option>
        <option value="BMW">BMW</option>
        <option value="Audi">Audi</option>
        <option value="Toyota">Toyota</option>
        <option value="Tesla">Tesla</option>
    </select>

    <label for="model">Velg modell:</label>
    <select id="model" name="model">
        <option value="">Velg et bilmerke først...</option>
    </select>

    <label for="year">Angi årsmodell:</label>
    <input type="text" id="year" name="year" placeholder="Eks: 2020">

    <label for="email">E-postadresse:</label>
    <input type="email" id="email" name="email" placeholder="Din e-post" required>

    <button type="submit">Send inn</button>
</form>

<script>
document.addEventListener("DOMContentLoaded", function () {
    var brandModelMap = {
        "BMW": ["X1", "X3", "X5", "M3", "M4"],
        "Audi": ["A3", "A4", "Q5", "Q7", "R8"],
        "Toyota": ["Corolla", "Camry", "RAV4", "Highlander", "Supra"],
        "Tesla": ["Model S", "Model 3", "Model X", "Model Y"],
    };

    var brandDropdown = document.getElementById("brand");
    var modelDropdown = document.getElementById("model");

    brandDropdown.addEventListener("change", function () {
        var selectedBrand = brandDropdown.value;
        modelDropdown.innerHTML = "<option value=''>Velg...</option>";

        if (brandModelMap[selectedBrand]) {
            brandModelMap[selectedBrand].forEach(function (model) {
                var option = document.createElement("option");
                option.value = model;
                option.textContent = model;
                modelDropdown.appendChild(option);
            });
        }
    });

    document.getElementById("carForm").addEventListener("submit", function (e) {
        e.preventDefault();

        var formData = new FormData(this);
        var params = new URLSearchParams(formData).toString();

        fetch("YOUR_GOOGLE_SCRIPT_WEB_APP_URL", {
            method: "POST",
            body: params,
            headers: { "Content-Type": "application/x-www-form-urlencoded" }
        })
        .then(response => response.text())
        .then(data => {
            alert("Ditt valg er sendt inn!");
            document.getElementById("carForm").reset();
        })
        .catch(error => {
            alert("Noe gikk galt. Prøv igjen.");
            console.error(error);
        });
    });
});
</script>
